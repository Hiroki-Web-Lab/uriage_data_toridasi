# サーバーへのデプロイ手順

このツールをクラウドサーバーにアップロードして、どこからでもアクセスできるようにする方法です。

## 🚀 おすすめのデプロイ先

### 1. **Railway**（最も簡単・おすすめ）
- 無料枠あり（月500時間まで）
- GitHub連携で自動デプロイ
- 設定が簡単

### 2. **Render**
- 無料枠あり（スリープするが無料）
- 設定ファイル（`render.yaml`）で簡単デプロイ

### 3. **Heroku**
- 無料枠は廃止（有料のみ）
- 安定しているが、料金がかかる

---

## 📦 Railway でデプロイする方法（おすすめ）

### 手順

1. **GitHubにアップロード**
   - GitHubアカウントを作成（なければ [github.com](https://github.com) で作成）
   - 新しいリポジトリを作成
   - このフォルダのファイルを全部アップロード
     - `package.json`
     - `server.js`
     - `scrapeUriage.js`
     - `public/` フォルダ
     - `render.yaml`（あれば）
     - **`node_modules/` はアップロードしない**（`.gitignore` で除外されます）

2. **Railwayに登録**
   - [railway.app](https://railway.app) にアクセス
   - 「Start a New Project」をクリック
   - 「Deploy from GitHub repo」を選択
   - 先ほど作ったリポジトリを選択

3. **自動デプロイ**
   - Railwayが自動で `npm install` と `npm start` を実行
   - 数分待つと、`https://あなたのアプリ名.railway.app` というURLが発行されます

4. **アクセス**
   - 発行されたURLをブラウザで開けば、どこからでも使えます！

---

## 📦 Render でデプロイする方法

### 手順

1. **GitHubにアップロード**（Railwayと同じ）

2. **Renderに登録**
   - [render.com](https://render.com) にアクセス
   - 「New +」→「Web Service」を選択
   - GitHubリポジトリを連携

3. **設定**
   - **Name**: `uriage-scraper`（好きな名前）
   - **Environment**: `Node`
   - **Build Command**: `npm install`
   - **Start Command**: `npm start`
   - **Plan**: Free（無料プラン）

4. **デプロイ**
   - 「Create Web Service」をクリック
   - 数分待つと、`https://あなたのアプリ名.onrender.com` というURLが発行されます

---

## 🔒 セキュリティについて（重要）

現在のバージョンは、**誰でもアクセスできる状態**です。

### 推奨：簡単な認証を追加

社内専用にする場合、以下のいずれかを追加することをおすすめします：

1. **パスワード保護**（簡単）
   - 画面にパスワード入力欄を追加
   - 正しいパスワードを入力しないと使えないようにする

2. **IP制限**（中級）
   - 特定のIPアドレスからのみアクセス可能にする

3. **ログイン機能**（上級）
   - ユーザー名・パスワードでログイン

**必要であれば、認証機能を追加することもできます。** 希望があれば教えてください。

---

## 🌐 デプロイ後の使い方

1. 発行されたURL（例：`https://あなたのアプリ名.railway.app`）をブラウザで開く
2. ローカルと同じように使えます
3. **PHPSESSIDは毎回入力が必要**（ブラウザの保存機能は、そのブラウザ内でのみ有効）

---

## ⚠️ 注意点

- **無料プランは制限あり**
  - Railway: 月500時間まで（個人利用なら十分）
  - Render: 15分間アクセスがないとスリープ（次回アクセス時に自動起動、少し時間がかかる）

- **PHPSESSIDの取り扱い**
  - PHPSESSIDは機密情報です。HTTPS（https://）でアクセスすることを推奨します
  - Railway / Render は自動でHTTPSが有効になります

---

## 🔧 トラブルシューティング

### 「デプロイが失敗する」

- `package.json` に `"start": "node server.js"` が入っているか確認
- `server.js` が正しくアップロードされているか確認
- Railway / Render のログを確認（エラーメッセージが出ているはず）

### 「アクセスできない」

- デプロイが完了するまで数分かかります（特に初回）
- Render の場合、スリープしている可能性があります（15分待ってから再度アクセス）

### 「データが取得できない」

- PHPSESSIDが正しいか確認
- サーバーのログを確認（Railway / Render のダッシュボードから見れます）

---

## 💡 次のステップ（オプション）

- **認証機能の追加**：パスワード保護など
- **カスタムドメイン**：`https://uriage.yourcompany.com` のような独自ドメイン
- **通知機能**：データ取得完了時にメール通知

必要であれば、これらも実装できます！






